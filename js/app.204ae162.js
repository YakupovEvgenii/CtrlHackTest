(function(t){function e(e){for(var r,i,u=e[0],a=e[1],c=e[2],p=0,f=[];p<u.length;p++)i=u[p],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r]);l&&l(e);while(f.length)f.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],r=!0,u=1;u<n.length;u++){var a=n[u];0!==o[a]&&(r=!1)}r&&(s.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},o={app:0},s=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],a=u.push.bind(u);u.push=e,u=u.slice();for(var c=0;c<u.length;c++)e(u[c]);var l=a;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},2246:function(t,e,n){"use strict";n("2edc")},"2edc":function(t,e,n){},"340c":function(t,e,n){"use strict";n("42a7")},"42a7":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);var r=n("2b0e"),o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app",attrs:{id:"app"}},[e("div",{staticClass:"app__button",domProps:{textContent:t._s(t.vuex?"без vuex":"c vuex")},on:{click:function(e){t.vuex=!t.vuex}}}),t.vuex?[e("WithVuex")]:[e("div",{staticClass:"app__inputs"},[e("div",[e("div",[t._v("цена")]),e("Input",{attrs:{modelValue:t.form.price},on:{input:e=>t.changeInput("price",e)}}),t._v(" "+t._s(t.form.price)+" ")],1),e("div",[e("div",[t._v("количество")]),e("Input",{attrs:{modelValue:t.form.count},on:{input:e=>t.changeInput("count",e)}}),t._v(" "+t._s(t.form.count)+" ")],1),e("div",[e("div",[t._v("сумма")]),e("Input",{attrs:{modelValue:t.form.amount},on:{input:e=>t.changeInput("amount",e)}}),t._v(" "+t._s(t.form.amount)+" ")],1),e("div",[e("button",{on:{click:t.sendForm}},[t._v("отправить")]),e("div",[t._v(t._s(t.localStorageForm))])])]),e("div",t._l(t.storageList,(function(n,r){return e("div",{key:r},[t._v(t._s(n))])})),0)]],2)},s=[],i=(n("14d9"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}})])}),u=[],a={name:"Input",props:["modelValue"],computed:{value:{get(){return this.modelValue},set(t){console.log("asd"),this.$emit("input",t)}}}},c=a,l=(n("e553"),n("2877")),p=Object(l["a"])(c,i,u,!1,null,"534a807e",null),f=p.exports;const m=t=>new Promise((e,n)=>{if(t.amount%2===0){const n=setTimeout(()=>{localStorage.setItem("form",JSON.stringify(t)),e({success:!0}),clearInterval(n)},1e3)}else n({success:!1})}),d=(t,e,n)=>{let r;return function(){const o=this,s=arguments,i=function(){r=null,n||t.apply(o,s)},u=n&&!r;clearTimeout(r),r=setTimeout(i,e),u&&t.apply(o,s)}};var v=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app",attrs:{id:"app"}},[e("div",{staticClass:"app__inputs"},[e("div",[e("div",[t._v("цена")]),e("Input",{attrs:{modelValue:t.form.price},on:{input:e=>t.changeInput("price",e)}}),t._v(" "+t._s(t.form.price)+" ")],1),e("div",[e("div",[t._v("количество")]),e("Input",{attrs:{modelValue:t.form.count},on:{input:e=>t.changeInput("count",e)}}),t._v(" "+t._s(t.form.count)+" ")],1),e("div",[e("div",[t._v("сумма")]),e("Input",{attrs:{modelValue:t.form.amount},on:{input:e=>t.changeInput("amount",e)}}),t._v(" "+t._s(t.form.amount)+" ")],1),e("div",[e("button",{on:{click:t.sendForm}},[t._v("отправить")]),e("div",[t._v(t._s(t.localStorageForm))])])]),e("div",t._l(t.storageList,(function(n,r){return e("div",{key:r},[t._v(t._s(n))])})),0)])},h=[],g={name:"App",components:{Input:f},data(){return{get localStorageForm(){return JSON.parse(localStorage.getItem("form"))||0}}},computed:{storageList(){return this.$store.getters.storageListReverse},form(){return this.$store.state},localStorageState(){return this.$store.getters.localStorageState}},methods:{changeInput:d((function(t,e){this.$store.dispatch("setFormValue",{field:t,value:e})}),300),async sendForm(){this.$store.dispatch("sendForm")}}},_=g,y=(n("340c"),Object(l["a"])(_,v,h,!1,null,null,null)),S=y.exports,b={name:"App",components:{Input:f,WithVuex:S},data(){return{form:{price:null,count:null,amount:null,nonce:0},firstChangeField:null,storage:[],vuex:!1,get localStorageForm(){return JSON.parse(localStorage.getItem("form"))||0}}},computed:{storageList(){const t=[...this.storage];return t.reverse()}},methods:{changeInput:d((function(t,e){this.firstChangeField||(this.firstChangeField=t),this.form[t]=e,this.storage.push(`change input ${t} - ${e}`),this.firstChangeField!==t&&this.calculateSelectedField()}),300),calculateSelectedField(){if(!this.firstChangeField)return;const t={price:()=>this.form.amount/this.form.count,count:()=>this.form.amount/this.form.price,amount:()=>this.form.price*this.form.count};this.form[this.firstChangeField]=t[this.firstChangeField]()},async sendForm(){try{this.form.nonce+=1,this.storage.push("send form - "+JSON.stringify(this.form));const t=await m(this.form);this.storage.push("success - "+JSON.stringify(t))}catch(t){this.storage.push("success - "+JSON.stringify(t))}}}},F=b,I=(n("2246"),Object(l["a"])(F,o,s,!1,null,null,null)),O=I.exports,x=n("2f62");r["a"].use(x["a"]);var w=new x["a"].Store({state:{form:{price:null,count:null,amount:null,nonce:0},storageList:[]},mutations:{setForm(t,{field:e,value:n}){t.form[e]=n},setStorageList(t,e){t.storageList.push(e)},setIncrement(t){t.form.nonce+=1}},actions:{setFormValue({commit:t},{field:e,value:n}){t("setForm",{field:e,value:n})},async sendForm({commit:t,state:e}){try{t("setIncrement"),t("setStorageList","send form - "+JSON.stringify(e.form));const n=await m(e.form);t("setStorageList","success - "+JSON.stringify(n))}catch(n){t("setStorageList","success - "+JSON.stringify(n))}}},getters:{storageListReverse(t){const e=[...t.storageList];return e.reverse()}},modules:{}});r["a"].config.productionTip=!1,new r["a"]({store:w,render:t=>t(O)}).$mount("#app")},e553:function(t,e,n){"use strict";n("e624")},e624:function(t,e,n){}});
//# sourceMappingURL=app.204ae162.js.map